---
import libros from "@data/libros.json";
---

<section class="cies-home-libros py-5">
  <div class="container">
    <div class="row align-items-end mb-5">
      <div class="col-12">
        <h2 class="h4 fw-bold mb-2 text-uppercase text-center cies-titulo">
          Libros publicados por el CiES
        </h2>
        <p class="mb-0 text-muted">
          <span style="color:#666">Una selección de títulos que reflejan nuestro trabajo académico y clínico.</span>
        </p>
      </div>
    </div>

    <div class="row g-4">
      {libros.map((libro) => (
        <div class="col-12 col-sm-6 col-md-4 col-lg-3" data-libro={libro.key}>
          <article class="card border-0 shadow-sm h-100 cies-home-libros-card">
            <a
              href={libro.portada}
              data-lightbox="libros-cies"
              data-title={`${libro.titulo} – ${libro.autor}`}
              class="cies-home-libros-cover-link"
            >
              <img
                src={libro.portada}
                alt={`Portada del libro ${libro.titulo}`}
                class="card-img-top cies-home-libros-cover"
                loading="lazy"
              />
            </a>

            <div class="card-body d-flex flex-column">
              <h3 class="h6 fw-bold mb-1">{libro.titulo}</h3>
              <p class="small text-muted mb-3">{libro.autor}</p>

              <div class="mt-auto d-flex flex-wrap gap-2">
                {libro.amazon && (
                  <a
                    href={libro.amazon}
                    class="btn btn-sm btn-success"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    Comprar en Amazon
                  </a>
                )}
                {libro.gandhi && (
                  <a
                    href={libro.gandhi}
                    class="btn btn-sm btn-outline-success"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    Comprar en Gandhi
                  </a>
                )}
              </div>
            </div>
          </article>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
.cies-home-libros-card {
  transition: transform 0.18s ease, box-shadow 0.18s ease;
  border-radius: 1rem;
  overflow: hidden;
}

.cies-home-libros-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
}

.cies-home-libros-cover {
  display: block;
  width: 100%;
  height: 260px;
  object-fit: cover;
  transition: transform 0.25s ease;
}

.cies-home-libros-card:hover .cies-home-libros-cover {
  transform: scale(1.03);
}

.cies-home-libros-cover-link {
  display: block;
}

</style>
