---
import logo from "@assets/cies-logo.png";
---

<header>
  <nav id="cies-nav" class="navbar fixed-top navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
    <div class="container-fluid d-flex flex-column align-items-center">
      <!-- Logo centrado inicial -->
      <a class="logo-wrapper-center" href="/">
        <img src={logo.src} alt="Logo Cies" class="logo-navbar" height="50" />
      </a>

      <!-- Logo scroll -->
      <a class="logo-wrapper-brand" href="/">
        <img src={logo.src} alt="Logo Cies" class="logo-navbar-brand" height="40" />
      </a>

      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target=".navbar-collapse"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
        <ul class="navbar-nav flex-grow-1">
          <li class="nav-item">
            <a class="nav-link" href="/">Inicio</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="dwnCies" role="button" data-bs-toggle="dropdown" aria-expanded="false">CiES</a>
            <ul class="dropdown-menu" aria-labelledby="dwnCies">
              <li><a class="dropdown-item" href="/onu-cies"><i class="bi bi-globe-americas me-2"></i>ONU - CiES</a></li>
              <li><a class="dropdown-item" href="/historia"><i class="bi bi-clock-history me-2"></i>Historia</a></li>
              <li><a class="dropdown-item" href="/convenios"><i class="bi bi-building-check me-2"></i>Convenios</a></li>
              <li><a class="dropdown-item" href="/docentes"><i class="bi bi-person-lines-fill me-2"></i>Docentes</a></li>
              <li><a class="dropdown-item" href="/cacies"><i class="bi bi-heart-pulse me-2"></i>CACiES</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="dwnProgramas" role="button" data-bs-toggle="dropdown" aria-expanded="false">Programas Académicos</a>
            <ul class="dropdown-menu" aria-labelledby="dwnProgramas">
              <li><a class="dropdown-item" href="/programas/licenciatura/psicologia"><i class="bi bi-mortarboard me-2"></i>Licenciatura en Psicología</a></li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item" href="/programas/maestria/psicomotricidad"><i class="bi bi-mortarboard me-2"></i>Maestría en Psicomotricidad</a></li>
              <li><a class="dropdown-item" href="/programas/maestria/psicoterapia-psicoanalitica"><i class="bi bi-mortarboard me-2"></i>Maestría en Psicoterapia Psicoanalítica</a></li>
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item" href="/programas/doctorado/investigacion-psicoanalitica"><i class="bi bi-mortarboard me-2"></i>Doctorado en Investigación Psicoanalítica</a></li>
              <li><a class="dropdown-item" href="/programas/doctorado/ciencias-del-desarrollo-humano"><i class="bi bi-mortarboard me-2"></i>Doctorado en Ciencias del Desarrollo Humano</a></li>
            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="dwnCursos" role="button" data-bs-toggle="dropdown" aria-expanded="false">Formación Continua</a>
            <ul class="dropdown-menu" aria-labelledby="dwnCursos">
              <li><a class="dropdown-item" href="/formacion/dominicales-psicoanalisis"><i class="bi bi-journal-text me-2"></i>Cursos dominicales de psicoanálisis</a></li>
              <li><a class="dropdown-item" href="/formacion/dominicales-psicomotricidad"><i class="bi bi-journal-text me-2"></i>Cursos dominicales de psicomotricidad</a></li>
              <li><a class="dropdown-item" href="/formacion/cursos-diplomados"><i class="bi bi-journal-text me-2"></i>Cursos y Diplomados</a></li>
              <!-- <li><a class="dropdown-item" href="/programas/maestria/psicoterapia-psicoanalitica"><i class="bi bi-book me-2"></i>Maestría en Psicoterapia Psicoanalítica</a></li> -->
              <li><hr class="dropdown-divider" /></li>
              <li><a class="dropdown-item" href="/formacion/encuentros-congresos"><i class="bi bi-person-arms-up me-2"></i>Encuentros y Congresos</a></li>
              <!-- <li><a class="dropdown-item" href="/programas/doctorado/ciencias-del-desarrollo-humano"><i class="bi bi-book me-2"></i>Doctorado en Ciencias del Desarrollo Humano</a></li> -->
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/">Contacto</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="dwnRevistasdigitales" role="button" data-bs-toggle="dropdown" aria-expanded="false">Revistas Digitales</a>
            <ul class="dropdown-menu" aria-labelledby="dwnRevistasdigitales">
              <li><a class="dropdown-item" href="http://cies-revistas.mx/index.php/Psicoanalisis"><i class="bi bi-journal-text me-2"></i>Letra en Psicoanálisis </a></li>
              <li><a class="dropdown-item" href="http://cies-revistas.mx/index.php/Psicomotricidad"><i class="bi bi-journal-text me-2"></i>Psicomotricidad Movimiento y Emoción</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/proceso-admision">Inicia tu proceso de admisión</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<script>
  (function () {
    // Realiza el juego de imagenes al hacer scroll
    const THRESHOLD = 60;

    function update() {
      const nav = document.getElementById("cies-nav");
      if (!nav) return;

      const scrolled = window.scrollY > THRESHOLD;
      nav.classList.toggle("scrolled", scrolled);
    }

    //window.addEventListener("load", update, { once: true });
    document.addEventListener("DOMContentLoaded", update);
    window.addEventListener("scroll", update, { passive: true });
  })();
</script>

<style>
  #cies-nav {
    height: var(--navbar-h);
    tbackground-color: rgba(255, 255, 255, 0.35);
    backdrop-filter: blur(0px);
    transition:
      backdrop-filter 0.25s ease,
      background-color 0.25s ease,
      box-shadow 0.25s ease,
      height 0.25s ease;
  }

  /* Da espacio vertical a la zona del menú */
  #cies-nav .navbar-collapse {
    padding-top: 2rem;
    padding-bottom: 0.4rem;
  }

  #cies-nav.scrolled {
    height: 60px;
    padding-bottom: 30px;
    background-color: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(12px);
    box-shadow: 0 4px 18px rgba(0, 0, 0, 0.08);
    box-shadow: 0 4px 18px rgba(0, 0, 0, 0.08);
  }

  .logo-wrapper-center {
    position: absolute;
    top: 5px; /* ajusta el valor a tu gusto */
    left: 50%;
    transform: translateX(-50%);
    z-index: 0;
  }

  .logo-wrapper-brand {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    /* que no estorbe al principio en mobile */
  }

  /* Logos con transición */
  .logo-navbar,
  .logo-navbar-brand {
    transition:
      opacity 0.25s ease,
      transform 0.25s ease;
  }

  /* Estado inicial: logo grande centrado visible, brand oculto */
  .logo-navbar {
    margin-top: 10px;
    opacity: 1;
    transform: translateY(0);
  }

  .logo-navbar-brand {
    opacity: 0;
    transform: translateY(-6px);
    pointer-events: none; /* que no se pueda clickear mientras está oculto */
  }

  #cies-nav .nav-item > .nav-link:hover,
  #cies-nav .nav-link.show {
    color: var(--cies-green-primary);
    font-weight: bolder;
  }

  /* Estado con scroll: se cruza uno por otro */
  #cies-nav.scrolled .logo-navbar {
    opacity: 0;
    transform: translateY(-6px);
    pointer-events: none;
  }

  #cies-nav.scrolled .logo-navbar-brand {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
  #cies-nav .dropdown-item:focus, .dropdown-item:hover {
    color: var(--cies-green-primary);
    background-color: var(--bs-dropdown-link-hover-bg);
  }
</style>
